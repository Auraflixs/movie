<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Auraflix+</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
      /* Estilos mínimos para que el modal y hero funcionen visualmente */
      .modal { position:fixed; inset:0; display:none; align-items:flex-start; justify-content:center; background: rgba(0,0,0,0.6); padding: 24px; z-index:1000; overflow:auto; }
      .modal-content { background:#111; color:#fff; width:100%; max-width:1100px; border-radius:8px; padding:16px; display:flex; gap:16px; }
      .player-wrapper { flex:1 1 60%; }
      .modal-info { flex:1 1 40%; }
      .close-modal { background:transparent; border:none; color:#fff; font-size:20px; }
      .carousel-container { position:relative; height:320px; overflow:hidden; }
      .carousel-slide img { width:100%; height:320px; object-fit:cover; display:block; }
      .dot { display:inline-block; width:8px; height:8px; background:#ddd; border-radius:50%; margin:4px; opacity:0.6; cursor:pointer; }
      .dot.active { background:#fff; opacity:1; }
      .item { width:140px; margin:8px; cursor:pointer; }
      .item img { width:100%; height:200px; object-fit:cover; display:block; border-radius:4px;}
      .search-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.9); z-index:1100; display:none; padding:20px; color:#fff; }
    </style>
</head>
<body>
    <header>
        <div class="logo">AURAFLIX+</div>
    </header>

    <div id="mainContent">
        <div id="view-home">
            <section id="hero" class="hero">
                <div class="carousel-container"></div>
                <div class="hero-gradient"></div>
                <div id="heroDots" class="carousel-indicators"></div>
            </section>

            <div id="continueWatchingContainer" class="hidden">
                <h2 class="section-title">Continuar viendo</h2>
                <div id="continueWatching" class="row horizontal-scroll"></div>
            </div>

            <h2 class="section-title">Recién agregadas</h2>
            <div id="newlyAddedRow" class="row horizontal-scroll"></div>

            <h2 class="section-title">Películas Destacadas</h2>
            <div id="homeMoviesRow" class="multi-row-container"></div>

            <h2 class="section-title">Series Destacadas</h2>
            <div id="homeSeriesRow" class="multi-row-container"></div>
        </div>

        <div id="view-movies" class="hidden full-page-view">
            <h2 class="section-title-large">Películas</h2>
            <div id="allMoviesGrid" class="row grid-layout"></div>
        </div>

        <div id="view-series" class="hidden full-page-view">
            <h2 class="section-title-large">Series</h2>
            <div id="allSeriesGrid" class="row grid-layout"></div>
        </div>
    </div>

    <div id="videoModal" class="modal">
        <div class="modal-content" role="dialog" aria-modal="true">
            <button id="closeModal" class="close-modal" aria-label="Atrás"><i class="fas fa-arrow-left"></i></button>
            
            <div id="modalContentPlayer" class="player-wrapper"></div>
            
            <div class="modal-info">
                <h3 id="modalTitle" class="modal-title"></h3>
                <div class="modal-meta">
                    <span id="modalId" class="modal-id" style="display:block; color:#aaa; font-size:12px;"></span>
                    <span id="modalYear" class="modal-year" style="margin-right:8px;"></span>
                    <span id="modalType" class="modal-type"></span>
                </div>
                <div class="modal-actions">
                    <button id="modalActionBtn" class="hero-btn info"><i class="fas fa-film"></i> Ver Tráiler</button>
                </div>
                <p id="modalDesc" class="modal-desc"></p>
                
                <div id="seriesEpisodeSelector" class="hidden">
                    <div class="season-selector">
                        <label>Seleccionar Temporada:</label>
                        <select id="modalSeasonSelect"></select>
                    </div>
                    <div id="modalEpisodesContainer" class="episodes-list"></div>
                </div>

                <h3 class="modal-subtitle">Recomendados</h3>
                <div id="modalRecommendations" class="row grid-layout recommendations-grid"></div>
            </div>
        </div>
    </div>

    <div id="searchOverlay" class="search-overlay">
        <button id="closeSearch" class="close-search"><i class="fas fa-times"></i></button>
        <div class="search-box" style="margin:12px 0;">
            <input id="searchInput" type="text" placeholder="Buscar título..." style="width:100%; padding:12px; font-size:16px;">
        </div>
        <div id="searchResults" class="row grid-layout"></div>
    </div>

    <nav class="bottom-nav">
        <a href="#" id="nav-home" class="nav-item active"><i class="fas fa-home"></i> Inicio</a>
        <a href="#" id="nav-movies" class="nav-item"><i class="fas fa-film"></i> Películas</a>
        <a href="#" id="nav-series" class="nav-item"><i class="fas fa-tv"></i> Series</a>
        <a href="#" id="nav-search" class="nav-item"><i class="fas fa-search"></i> Buscar</a>
    </nav>

    <script>
        // Interceptor para mantener el orden real de carga de scripts (peliX / serieX).
        window.allContentSequence = [];
        window.moviesList = window.moviesList || [];
        window.seriesList = window.seriesList || [];

        function interceptPush(array) {
            const originalPush = array.push;
            array.push = function(...items) {
                const result = originalPush.apply(this, items);
                try { window.allContentSequence.push(...items); } catch(e) {}
                return result;
            };
        }
        interceptPush(window.moviesList);
        interceptPush(window.seriesList);
    </script>

    <!-- Archivos de contenido -->
    <script src="peli3.js"></script>
    <script src="serie3.js"></script>
    <script src="peli5.js"></script>
    <script src="peli1.js"></script>
    <script src="peli2.js"></script>
    <script src="peli4.js"></script>
    <script src="serie2.js"></script>
    <script src="peli6.js"></script>
    <script src="peli7.js"></script>
    <script src="serie4.js"></script>
    <script src="peli8.js"></script>
    <script src="peli9.js"></script>
    <script src="serie1.js"></script>
    <script src="peli10.js"></script>
    <script src="peli11.js"></script>
    <script src="peli12.js"></script>
    <script src="peli13.js"></script>
    <script src="peli14.js"></script>
    
    <!-- id.js: usa STRINGS con los id que están en los objetos -->
    <script src="id.js"></script>

    <!-- Script principal -->
    <script src="script.js"></script>
</body>
</html>